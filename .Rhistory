indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
indices_to_delete
table(user$app_action)
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == i){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
if(correct_action == KEYBOARD_AUTH |
current_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
indices_to_delete
table(user$app_action)
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == i){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_CPF){
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_MONEY){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
indices_to_delete
indices_to_delete <- c()
indices_to_delete <- append(indices_to_delete,1)
indices_to_delete
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == i){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
print(current_action)
# clear pix_money
if(current_action == KEYBOARD_AUTH){
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_CPF){
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_MONEY){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
break
}
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == i){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
print('KEYBOARD_AUTH')
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
print('KEYBOARD_PIX_CPF')
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
print('KEYBOARD_PIX_MONEY')
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
correct_action
indices_to_delete
user
table(user$app_action)
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == 1){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
#print('KEYBOARD_AUTH')
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
#print('KEYBOARD_PIX_CPF')
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
#print('KEYBOARD_PIX_MONEY')
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
indices_to_delete
sensors <- sensors[-indices_to_delete]
gc()
table(user$app_action)
View(sensors)
3 > 5
3 > 5 || 3 < 5
3 > 5 && 3 < 5
for (i in c(1:nrow(user))){
row <- user[i]
if (i == 1){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
#print('KEYBOARD_AUTH')
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
#print('KEYBOARD_PIX_CPF')
if(current_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
#print('KEYBOARD_PIX_MONEY')
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
View(sensors)
View(sensors)
View(sensors)
indices_to_delete
sensors <- sensors[-indices_to_delete]
library(tidyverse)
library(data.table)
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
library(tidyverse)
library(data.table)
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
file <- 'keyboardData.csv'
path_csv <- paste(path_parent, file, sep = '')
keyboard <- fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action', 'pointer_event_type',
'character', 'pressure', 'x', 'y', 'uptime')
names(keyboard) <- cnames
ids <- unique(keyboard$user_id)
ids_error1 <- ids[ids !=11]
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
file = 'sensorsData.csv'
path_csv = paste(path_parent,file, sep = '')
sensors  = fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action',
'sensor_type', 'x', 'y', 'z', 'timestamp')
names(sensors) <- cnames
sensors[order(
sensors$user_id,
sensors$action_number,
sensors$app_action),]
KEYBOARD_AUTH <- 6
KEYBOARD_PIX_MONEY <- 7
KEYBOARD_PIX_CPF <- 8
user <- sensors[sensors$user_id == ids_error1[1]]
table(user$app_action)
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == 1){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
#print('KEYBOARD_AUTH')
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
#print('KEYBOARD_PIX_CPF')
if(current_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
#print('KEYBOARD_PIX_MONEY')
if(correct_action == KEYBOARD_AUTH ||
current_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
sensors <- sensors[-indices_to_delete]
View(sensors)
View(sensors)
library(tidyverse)
library(data.table)
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
file <- 'keyboardData.csv'
path_csv <- paste(path_parent, file, sep = '')
keyboard <- fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action', 'pointer_event_type',
'character', 'pressure', 'x', 'y', 'uptime')
names(keyboard) <- cnames
ids <- unique(keyboard$user_id)
ids_error1 <- ids[ids !=11]
KEYBOARD_AUTH <- 6
KEYBOARD_PIX_MONEY <- 7
KEYBOARD_PIX_CPF <- 8
user <- sensors[sensors$user_id == ids_error1[1]]
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
file = 'sensorsData.csv'
path_csv = paste(path_parent,file, sep = '')
sensors  = fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action',
'sensor_type', 'x', 'y', 'z', 'timestamp')
names(sensors) <- cnames
# sensors[order(
#   sensors$user_id,
#   sensors$action_number,
#   sensors$app_action),]
# base <- sensors %>%
#   group_by(
#     user_id,
#     action_number,
#     app_action)
#
# description = base %>%
#   summarise(
#     action_number = mean(action_number),
#     obs = n()
#   )
KEYBOARD_AUTH <- 6
KEYBOARD_PIX_MONEY <- 7
KEYBOARD_PIX_CPF <- 8
user <- sensors[sensors$user_id == ids_error1[1]]
table(user$app_action)
# correct order: 7, 8, 6
indices_to_delete <- c()
for (i in c(1:nrow(user))){
row <- user[i]
if (i == 1){
previous_action <- 100
correct_action <- 100
}
current_action <- row$app_action
# clear pix_money
if(current_action == KEYBOARD_AUTH){
#print('KEYBOARD_AUTH')
correct_action <- current_action
}
else if(current_action == KEYBOARD_PIX_CPF){
#print('KEYBOARD_PIX_CPF')
if(correct_action == KEYBOARD_AUTH){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
else if(current_action == KEYBOARD_PIX_MONEY){
#print('KEYBOARD_PIX_MONEY')
if(correct_action == KEYBOARD_AUTH ||
correct_action == KEYBOARD_PIX_CPF){
indices_to_delete <- append(indices_to_delete, i)
}
else{
correct_action <- current_action
}
}
}
sensors <- sensors[-indices_to_delete]
View(sensors)
View(sensors)
View(sensors)
library(tidyverse)
library(data.table)
#
# day 20230119 #
#
library(tidyverse)
library(data.table)
path_parent <- '/home/jcscabral/Studies/UspEsalq/pesquisa/20240119/'
file = 'swipeData.csv'
path_csv = paste(path_parent,file, sep = '')
swipe = fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action', 'pointer_event_type',
'pressure', 'x', 'y', 'uptime')
names(swipe) <- cnames
ids <- unique(swipe[swipe$action_number == 7,]$user_id)
plot(swipe[swipe$user_id == 7,]$action_number)
ids_error1 <- ids[ids !=11 & ids !=2]
swipe
swipe$diff_time <- 0
id <- 7
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
View(swipe)
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
View(swipe)
id
swipe[swipe$user_id == id,]$uptime
diff(swipe[swipe$user_id == id,]$uptime)
c(0, diff(swipe[swipe$user_id == id,]$uptime))
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
View(swipe)
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
max_diff_time <- max(swipe$diff_time)
indices <- which(swipe$user_id == 7)
id_last <- which(swipe$user_id == id &
swipe$diff_time == max_diff_time)
id_last
indices
id_last
id <- 7
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
max_diff_time <- max(swipe$diff_time)
indices <- which(swipe$user_id == 7)
id_last <- which(swipe$user_id == id &
swipe$diff_time == max_diff_time)
indices_to_delete <- c((id_last + 1): max(indices))
swipe <- swipe[-indices_to_delete]
View(swipe[swipe$user_id == id])
plot(swipe[swipe$user_id == id,]$action_number)
plot(swipe[swipe$user_id == id,]$action_number)
id <- 8
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
max_diff_time <- max(swipe$diff_time)
indices <- which(swipe$user_id == 7)
id_last <- which(swipe$user_id == id &
swipe$diff_time == max_diff_time)
indices_to_delete <- c((id_last + 1): max(indices))
swipe <- swipe[-indices_to_delete]
plot(swipe[swipe$user_id == id,]$action_number)
file = 'swipeData.csv'
path_csv = paste(path_parent,file, sep = '')
swipe = fread(path_csv)
cnames <- c('user_id', 'action_number', 'app_action', 'pointer_event_type',
'pressure', 'x', 'y', 'uptime')
names(swipe) <- cnames
ids <- unique(swipe[swipe$action_number == 7,]$user_id)
plot(swipe[swipe$user_id == 7,]$action_number)
ids_error1 <- ids[ids !=11 & ids !=2]
swipe$diff_time <- 0
id <- 7
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
max_diff_time <- max(swipe$diff_time)
indices <- which(swipe$user_id == id)
id_last <- which(swipe$user_id == id &
swipe$diff_time == max_diff_time)
indices_to_delete <- c((id_last + 1): max(indices))
swipe <- swipe[-indices_to_delete]
plot(swipe[swipe$user_id == id,]$action_number)
id <- 8
swipe[swipe$user_id == id]$diff_time <-
c(0, diff(swipe[swipe$user_id == id,]$uptime))
max_diff_time <- max(swipe$diff_time)
indices <- which(swipe$user_id == id)
id_last <- which(swipe$user_id == id &
swipe$diff_time == max_diff_time)
indices_to_delete <- c((id_last + 1): max(indices))
swipe <- swipe[-indices_to_delete]
plot(swipe[swipe$user_id == id,]$action_number)
SWIPE_PIX_SEND <- 2
for (id in ids_error1){
id_indices <- which(sensors$user_id == id &
sensors$action_number < 3)
first_index_pix <- match(c(SWIPE_PIX_SEND),
sensors[id_indices]$app_action)
user = sensors[id_indices]
i = first_index_pix
while (user$app_action[i] == SWIPE_PIX_SEND) {
i <- i+1
}
start_indice <- id_indices[1]
end_indice <- id_indices[i - 1]
sensors[start_indice:end_indice]$action_number <-1
}
SWIPE_PIX_SEND <- 2
for (id in ids_error1){
id_indices <- which(swipe$user_id == id &
swipe$action_number < 3)
first_index_pix <- match(c(SWIPE_PIX_SEND),
swipe[id_indices]$app_action)
user = swipe[id_indices]
i = first_index_pix
while (user$app_action[i] == SWIPE_PIX_SEND) {
i <- i+1
}
start_indice <- id_indices[1]
end_indice <- id_indices[i - 1]
swipe[start_indice:end_indice]$action_number <-1
}
plot(swipe[swipe$user_id == 7,]$action_number)
plot(swipe[swipe$user_id == 8,]$action_number)
plot(swipe[swipe$user_id == 1,]$action_number)
ids
plot(swipe[swipe$user_id == 3,]$action_number)
plot(swipe[swipe$user_id == 6,]$action_number)
plot(swipe[swipe$user_id == 10,]$action_number)
plot(swipe[swipe$user_id == 11,]$action_number)
plot(swipe[swipe$user_id == 2,]$action_number)
plot(swipe[swipe$user_id == 12,]$action_number)
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
keyboard =  NULL
source("~/Studies/UspEsalq/pesquisa/fix_bug.R")
